#class newbie_wd open;
#var task_running 0;
#alias {newbie.q.cancel} {
    gt wd;
    on_there {
        ask chongxu about cancel;
        #var task_running 0;
    };
};
#alias {newbie.q} {
    #class newbie_wd.inner open;

    #alias {newbie.start} {
        ask chongxu about quest;
        #nop showme ÄãÏò³åĞéµÀ³¤´òÌıÓĞ¹Ø¡ºquest¡»µÄÏûÏ¢¡£;
        #nop showme ÎÒÃÇ¾Í´Ó×î¼òµ¥µÄÎåĞĞÕó¿ªÊ¼°É£¬ÅÔ±ßĞ¡Ğ£³¡ÉÏÓĞ½ÌÏ°½Ì´ó¼ÒÔõÃ´ĞĞ×ßÎåĞĞÕó¡£¡¹;
        #nop showme ×¯ÒàĞ°Ò»»á¶ùÕ¾ÔÚË®Î»;
    };

    #alias {newbie.songjing} {
        #var sj_address %0;
        #var sj_book %1;
        
        gt ÈıÇåµî;
        ask song yuanqiao about ÏÂÉ½;
        gt ¸´Õæ¹Û¶ş²ã;
        jie ${sj_book};
        gt ${sj_address};
        l jing;
    };

    #action {ÄãÏò³åĞéµÀ³¤´òÌıÓĞ¹Ø} {
        #class waitquest open;
        #action {µÀĞÖ»¹ÓĞÈÎÎñÔÚÉí} {
            #if {"$task_running" == "1"} {
                #echo "task is running........";
                #return;
            }
            ask chongxu about cancel;
            ask chongxu about quest;
        };
        #action {ÏÖÔÚ»¹Ã»ÓĞĞÂµÄ¹¤×÷¿ÉÒÔ·ÖÅä¸øÄã} {
            #if {"$task_running" == "1"} {
                #echo "task is running........";
                #return;
            }
            #delay {10} {
                #class waitquest kill;
                #nop newbie.start;
            };
        };
        #action {³åĞéµÀ³¤ËµµÀ£º¡¸½ñÌìÈ«ÅÉµÜ×ÓÒªÔÚ%*Êì¶Áµä¼®£¬¾İËµÒªËĞ³ª%*µÄ%*(%*)} {
            #if {"$task_running" == "1"} {
                #echo "task is running........";
                #return;
            }
            #var task_running 1;
            #class wd_songjing_a open;
                #var sj_address %%%%1;
                #var sj_book %%%%2;
                #var sj_article %%%%3;
                #var sj_page %%%%4;
                show_to_quest ËĞ¾­: ${sj_address}/${sj_book}/${sj_article}/${sj_page};
                newbie.songjing ${sj_address} ${sj_book};
            #class wd_songjing_a close;
            #var task_running 0;
        };
        #action {³åĞéµÀ³¤ËµµÀ£º¡¸½ñÌìÈ«ÅÉµÜ×ÓÒªÔÚ%*Êì¶Áµä¼®£¬¾İËµÒªËĞ³ª%*µÄµÚ%*Ê®%*ÕÂ} { #nop ];
            #if {"$task_running" == "1"} {
                #echo "task is running........";
                #return;
            }
            #var task_running 1;
            #class wd_songjing_b open;
                #var sj_address %%%%1;
                #var sj_book %%%%2;
                #var sj_article %%%%3;

                #var sj_page 0;
                #IF {"%3" == "Ò»"} {#var sj_page 10};
                #ELSEIF {"%3" == "¶ş"} {#var sj_page 20};
                #ELSEIF {"%3" == "Èı"} {#var sj_page 30};
                #ELSEIF {"%3" == "ËÄ"} {#var sj_page 40};
                #ELSEIF {"%3" == "Îå"} {#var sj_page 50};
                #ELSEIF {"%3" == "Áù"} {#var sj_page 60};
                #ELSEIF {"%3" == "Æß"} {#var sj_page 70};
                #ELSEIF {"%3" == "°Ë"} {#var sj_page 80};
                #ELSEIF {"%3" == "¾Å"} {#var sj_page 90};

                #IF {"%4" == "Ò»"} {#math sj_page $sj_page+1};
                #ELSEIF {"%4" == "¶ş"} {#math sj_page $sj_page+2};
                #ELSEIF {"%4" == "Èı"} {#math sj_page $sj_page+3};
                #ELSEIF {"%4" == "ËÄ"} {#math sj_page $sj_page+4};
                #ELSEIF {"%4" == "Îå"} {#math sj_page $sj_page+5};
                #ELSEIF {"%4" == "Áù"} {#math sj_page $sj_page+6};
                #ELSEIF {"%4" == "Æß"} {#math sj_page $sj_page+7};
                #ELSEIF {"%4" == "°Ë"} {#math sj_page $sj_page+8};
                #ELSEIF {"%4" == "¾Å"} {#math sj_page $sj_page+9};

                show_to_quest ËĞ¾­: ${sj_address}/${sj_book}/${sj_article}/${sj_page};
                newbie.songjing ${sj_address} ${sj_book};
            #class wd_songjing_b close;
            #var task_running 0;
        };
        #action {³åĞéµÀ³¤ËµµÀ£º¡¸½ñÌìÈ«ÅÉµÜ×ÓÒªÔÚ%*Êì¶Áµä¼®£¬¾İËµÒªËĞ³ª%*µÄµÚ%*ÕÂ} { #nop ];
            #if {"$task_running" == "1"} {
                #echo "task is running........";
                #return;
            }
            #var task_running 1;
            #class wd_songjing_c open;
                #var sj_address %%%%1;
                #var sj_book %%%%2;
                #var sj_article %%%%4;

                #var sj_page 0;
                #IF {"%3" == "Ò»"} {#var sj_page 1};
                #ELSEIF {"%3" == "¶ş"} {#var sj_page 2};
                #ELSEIF {"%3" == "Èı"} {#var sj_page 3};
                #ELSEIF {"%3" == "ËÄ"} {#var sj_page 4};
                #ELSEIF {"%3" == "Îå"} {#var sj_page 5};
                #ELSEIF {"%3" == "Áù"} {#var sj_page 6};
                #ELSEIF {"%3" == "Æß"} {#var sj_page 7};
                #ELSEIF {"%3" == "°Ë"} {#var sj_page 8};
                #ELSEIF {"%3" == "¾Å"} {#var sj_page 9};
                #ELSEIF {"%3" == "Ê®"} {#var sj_page 10};

                show_to_quest ËĞ¾­: ${sj_address}/${sj_book}/${sj_article}/${sj_page};
                newbie.songjing ${sj_address} ${sj_book};
            #class wd_songjing_c close;
            #var task_running 0;
        };

        #action {Äãµ½Óáá·ÑÒÄÇÀï°ïËû¿´¿´Â¯»ğ°É} {
            #if {"$task_running" == "1"} {
                #echo "task is running........";
                #return;
            }
            #var task_running 1;
            #class wd_liandan open;
            #delay {kanluhuo} {
                show_to_quest Á¶µ¤ÈÎÎñ¿ªÊ¼;
                n;n;n;n;e;e;
                ask yu about Á¶µ¤;
                s;
                zuo;
                kan;
            } {3}
            #action {ÎÒ»¹Ã»ÓĞ¿ªÊ¼Á¶µ¤ÄØ£¬²»Òª×Å¼±} {
                zhan; 
                gt wd;
                on_there {
                    show_to_quest Á¶µ¤ÈÎÎñÈ¡Ïû;
                    ask chongxu about cancel;
                    #var task_running 0;
                    #class wd_liandan kill;
                    #class waitquest kill;
                    #nop newbie.start;
                };
            };
            #action {¸Ï½ôÏòÓáá·ÑÒ±¨¸æ} {
                zhan; n; 
                ask yu about Á¶µ¤; 
            };
            #action {¿ì»ØÈ¥Ïò³åĞéµÀ³¤±¨¸æÁ¶µ¤Çé¿ö°É} {
                gt wd;
                on_there {
                    show_to_quest Á¶µ¤ÈÎÎñ³É¹¦;
                    ask chongxu about success;
                    #cast 0 $task_running;
                    #class wd_liandan kill;
                    #class waitquest kill;
                    #nop newbie.start;
                };
            };
            #action {~*********[1;35m^[2;37;0m********} {
                change M
            };
            #action {~*********[1;31m^[2;37;0m********} {
                change L
            };
            #action {~*********[1;33m^[2;37;0m********} {
                change H
            };
            #class wd_liandan close;
        };

        #action {ÅÔ±ßĞ¡Ğ£³¡ÉÏÓĞ½ÌÏ°½Ì´ó¼ÒÔõÃ´ĞĞ×ßÎåĞĞÕó} {
            #if {"$task_running" == "1"} {
                #echo {"task is running........"};
                #return;
            }
            #var task_running 1;
            #echo {"$task_running"};
            #class wd_zhenfa open;
                #var myloc ¿Õ;
                #var myvar ¿Õ;
                #alias {zhenfa.start} {
                    east; zhenfa;
                };
                #action {ÑİÏ°Õó·¨µÄ½ÌÏ°¶¼ÔÚÊ¹ÓÃÖĞ} {
                    show_to_quest Õó·¨È¡Ïû;
                    newbie.q.cancel;
                    #class wd_zhenfa kill;
                };
                #action {ÇëµÈ¶Ô·½ÑİÏ°½áÊøÔÙ½øÈ¥°É} {
                    #delay {5} {
                        zhenfa.start;
                    };
                };
                #action {^×¯ÒàĞ°Ò»»á¶ùÕ¾ÔÚ%*Î»} {
                    show_to_quest Õó·¨¿ªÊ¼;
                    #var myloc %%%%1;
                    zouwei $myloc;
                };
                #action {ÎåĞĞÕóÑİÁ·µ½´Ë½áÊø} {
                    show_to_quest Õó·¨³É¹¦;
                    gt wd;
                    on_there {
                        ask chongxu about success;
                        #class wd_zhenfa kill;
                        #var task_running 0;
                    };
                };
                #action {´ó¼ÒÖ»ºÃ¶¼Í£ÏÂÀ´} {
                    show_to_quest Õó·¨Ê§°Ü;                
                    #class wd_zhenfa kill;
                    #var task_running 0;
                };
                #action {Î»ÖÃ°´ÕÕ¡º%*ÎåĞĞÕó¡»µÄÒªÇóÍùÏÂ×ßÒ»²½} {
                    #var myvar %%%%1;
                    #IF {"$myvar" == "Õı" && "$myloc" == "½ğ"}
                    {
                        zouwei Ë®;
                        #var myloc Ë®;
                    };
                    #ELSEIF {"$myvar" == "Õı" && "$myloc" == "Ë®"}
                    {
                        zouwei Ä¾;
                        #var myloc Ä¾;
                    };
                    #ELSEIF {"$myvar" == "Õı" && "$myloc" == "Ä¾"}
                    {
                        zouwei »ğ;
                        #var myloc »ğ;
                    };
                    #ELSEIF {"$myvar" == "Õı" && "$myloc" == "»ğ"}
                    {
                        zouwei ÍÁ;
                        #var myloc ÍÁ;
                    };
                    #ELSEIF {"$myvar" == "Õı" && "$myloc" == "ÍÁ"}
                    {
                        zouwei ½ğ;
                        #var myloc ½ğ;
                    };
                    #ELSEIF {"$myvar" == "·´" && "$myloc" == "½ğ"}
                    {
                        zouwei Ä¾;
                        #var myloc Ä¾;
                    };
                    #ELSEIF {"$myvar" == "·´" && "$myloc" == "Ä¾"}
                    {
                        zouwei ÍÁ;
                        #var myloc ÍÁ;
                    };
                    #ELSEIF {"$myvar" == "·´" && "$myloc" == "ÍÁ"}
                    {
                        zouwei Ë®;
                        #var myloc Ë®;
                    };
                    #ELSEIF {"$myvar" == "·´" && "$myloc" == "Ë®"}
                    {
                        zouwei »ğ;
                        #var myloc »ğ;
                    };
                    #ELSEIF {"$myvar" == "·´" && "$myloc" == "»ğ"}
                    {
                        zouwei ½ğ;
                        #var myloc ½ğ;
                    };
                };
                zhenfa.start;
            #class wd_zhenfa close;
        };

        #class waitquest close;
    };

    #class newbie_wd.inner close;

    newbie.start;
};

#alias {newbie.stop} {
    #class newbie_wd.inner kill;
    show_to_quest ĞÂÊÖÈÎÎñ½áÊø;
};

#class newbie_wd close;
